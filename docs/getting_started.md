# Getting Started: Generating Robot Code

This guide walks you through the basic process of generating a robot-specific C++ library (and optionally Python bindings) using the `thunder` command-line tool.

## Prerequisites

*   Thunder Dynamics installed (see [Installation Guide](./installation.md)).
*   A robot configuration YAML file (see [Configuration Guide](./configuration.md)). Example files are available in the `robots/` directory.

## The `thunder gen` Command

The core command for code generation is `thunder gen`. Its basic syntax is:

```bash
thunder gen [-n <robot_name>] [-p | --python] <path>/<robot>.yaml
```

*   **`<path>/<robot>.yaml`**: (Required) The relative or absolute path to the robot's configuration YAML file.
*   **Options**:
    *   `-n <robot_name>` or `--name <robot_name>`: Specifies a custom name for the robot. This name will be used for the generated files and classes (e.g., `thunder_<robot_name>.h`). If omitted, the name defaults to the base name of the YAML file (e.g., `franka` for `franka.yaml`).
    *   `-p` or `--python`: Generates Python bindings in addition to the C++ library. Requires `pybind11` to be installed.


## Example Workflow

Let's generate code for the Franka Emika Panda robot example provided in `robots/franka/franka.yaml`.

1.  **Navigate to the project root directory** (or ensure the `thunder` executable is in your PATH). If using the Dev Container, `thunder` is already available in `bin/`.
2.  **Run the generation command**:

    *   **C++ only:**
        ```bash
        # Assuming you are in the thunder_dynamics root directory
        ./bin/thunder gen robots/franka/franka.yaml
        ```
        Or, if `thunder` is in your PATH:
        ```bash
        thunder gen robots/franka/franka.yaml
        ```

    *   **C++ and Python:**
        ```bash
        ./bin/thunder gen --python -n FrankaPanda robots/franka/franka.yaml
        ```
        This command uses `-n FrankaPanda` to name the generated files and classes `FrankaPanda` instead of the default `franka`.

## Generated Files

After running the command, a new directory named `<robot_name>_generatedFiles` will be created (e.g., `franka_generatedFiles` or `FrankaPanda_generatedFiles`) inside the current working directory. This directory contains:

*   **`CMakeLists.txt`**: CMake file to build the generated C++ library and Python bindings (if requested).
*   **`<robot_name>_gen.h` / `<robot_name>_gen.cpp`**: Low-level C functions generated by CasADi containing the core symbolic computations.
*   **`thunder_<robot_name>.h` / `thunder_<robot_name>.cpp`**: The C++ wrapper class providing a user-friendly API to the generated functions. This is the primary interface you'll use.
*   **`<robot_name>_conf.yaml`**: A YAML file containing the numerical values of the robot parameters used during generation. Can be loaded by the `thunder_<robot_name>` class.
*   **`<robot_name>_par_REG.yaml`**: A YAML file containing the standard inertial parameters (typically 10 per link) that the dynamics are linear with respect to. Useful for identification and adaptive control. Can be loaded by the `thunder_<robot_name>` class.
*   **Build artifacts** (after building): Includes the compiled library (`libthunder_<robot_name>.a` or `.so`) and Python module (`thunder_<robot_name>_py.*.so`).

## Next Steps

*   Learn how to use the generated library in your C++ projects: **[C++ Usage Guide](./cpp_usage.md)**
*   Learn how to build and use the Python bindings: **[Python Usage Guide](./python_usage.md)**
*   Understand the configuration file format: **[Configuration Guide](./configuration.md)**
